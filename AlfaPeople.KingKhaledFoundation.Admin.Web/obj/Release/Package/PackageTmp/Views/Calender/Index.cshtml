
@{
    ViewBag.Title = "Calender";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";
}

<!-- Content -->
<div class="content">
    <div class="container-fluid">
        <!-- <div class="header text-center">
        <h3 class="title"> </h3>
        <p class="category">
        <a target="_blank" href="#"></a>
        <a href="#" target="_blank"> </a>
        </p>
        </div> -->
        <div class="row">
            <!-- <div class="col-md-10 ml-auto mr-auto"> -->
            <div class="col-md-12">
                <div class="card card-calendar">
                    <div class="card-body">
                        <div id="fullCalendar"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Content -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog" style="max-width: 50%;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-inline"> Name :   </label>
                    <h4 class="modal-title"><span id="Name"></span></h4>
                </div>
                <div class="form-group">
                    <label class="label"> From Date:   </label>
                    <p id="FromDate"></p>
                </div>
                <div class="form-group">
                    <label class="label"> To Date:   </label>
                    <p id="ToDate"></p>
                </div>
                <div class="form-group">
                    <label class="label"> Description:   </label>
                    <p id="Details"></p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


@section Scripts{

    <script>
        window.onload = function (e) {
            $('#navItem_Calender').addClass('active');
        };
    </script>

    <script>
        $(document).ready(function () {
            // md.initFullCalendar();

            $('#fullCalendar').fullCalendar({

                events: {
                    url: '@Url.Action("GetActiveEvents")',
                    type: 'Get',

                    error: function() {
                        alert('there was an error while fetching events!');
                    }


                },
                eventClick: function (calEvent, jsEvent, view) {
                    selectedEvent = calEvent;
                    $.getJSON('@Url.Action("GetDetails")', { "Id": calEvent.EventID }, function (Result) {
                        $('#myModal #Name').text(calEvent.title);
                        $('#myModal #FromDate').text(calEvent.start._i);
                        $('#myModal #ToDate').text(calEvent.end._i);
                        $('#myModal #Details').text(Result.Description);
                    });
                    $('#myModal').modal();
                    // alert(calEvent.EventID);
                },
                //,
                //hiddenDays:[5,6]
            })
        });


    </script>

}