<!DOCTYPE html>
<html lang="@Resources.General.lang" style="direction:@Resources.General.dir; text-align:@Resources.General.TextAlign;">
<head>
    <style>
        .field-validation-error {
            color: red;
            display: block;
            font-size: 11px;
        }

        /* Portal Hero Section Styles - Default for Desktop */
        .portal-hero {
            position: absolute;
            top: 50%;
            right: 8%;
            transform: translateY(-50%);
            text-align: center;
            color: white;
            z-index: 1;
            max-width: 600px;
            width: 45%;
            padding: 20px;
        }

        .portal-hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
            line-height: 1.2;
        }

        .portal-hero h2 {
            font-size: 2rem;
            font-weight: 500;
            margin-bottom: 1rem;
            text-shadow: 1px 1px 6px rgba(0, 0, 0, 0.3);
            line-height: 1.4;
        }

        .portal-hero p {
            font-size: 1.1rem;
            font-weight: 300;
            line-height: 1.6;
            margin-bottom: 0.5rem;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.2);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Responsive design */
        @@media (max-width: 1200px) {
            .portal-hero {
                right: 5%;
                width: 50%;
                max-width: 500px;
            }
        }

        @@media (max-width: 992px) {
            .portal-hero {
                right: 3%;
                width: 55%;
                max-width: 450px;
            }
            .portal-hero h1 {
                font-size: 2.5rem;
            }
            .portal-hero h2 {
                font-size: 1.5rem;
            }
            .portal-hero p {
                font-size: 1rem;
            }
        }

        @@media (max-width: 768px) {
            /* Change parent container to column layout on mobile */
            .page-header {
                display: flex !important;
                flex-direction: column !important;
            }

            .portal-hero {
                position: relative;
                right: auto;
                top: auto;
                transform: none;
                width: 90%;
                max-width: 100%;
                margin: 120px auto 20px;
                padding: 0 20px;
            }
            .portal-hero h1 {
                font-size: 1.8rem;
                margin-bottom: 0;
            }
            .portal-hero h2 {
                display: none;
            }
            .portal-hero p {
                display: none;
            }
        }

        @@media (max-width: 480px) {
            .portal-hero {
                margin: 110px auto 15px;
            }
            .portal-hero h1 {
                font-size: 1.5rem;
            }
        }

        /* Adjust page wrapper for hero */
        .wrapper-full-page {
            position: relative;
        }

        .page-header {
            min-height: 100vh;
        }
    </style>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="~/assets/img/piclogo.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>King Khalid Foundation</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="~/assets/css/css.css" />
    <link rel="stylesheet" href="~/assets/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="~/assets/css/material-dashboard.min.css?v=2.0.2" rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="~/assets/demo/demo.css" rel="stylesheet" />
</head> 
<body class="off-canvas-sidebar @Resources.General.dir" @if (Resources.General.lang == "ar") { <text> style="font-family: 'Suisse', 'Lucida Grande', 'Droid Arabic Kufi', Arial, sans-serif !important; text-align: right " </text>  } else { <text> style="font-family: 'Mabry', 'Lucida Grande', Arial, sans-serif !important;" </text> }>
    <!-- Extra details for Live View on GitHub Pages -->
    <!-- Google Tag Manager (noscript) -->
    <noscript>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top text-white" id="navigation-example">
        <div class="container">
            <div class="navbar-wrapper">
                @if (@ViewBag.HideKKFLogo != "True")
                {
                    <img src="~/assets/img/logo.png" class="navbar-brand" style="height:100px;padding:0;" />
                }
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation" data-target="#navigation-example">
                <span class="sr-only">Toggle navigation</span>
                <span class="navbar-toggler-icon icon-bar"></span>
                <span class="navbar-toggler-icon icon-bar"></span>
                <span class="navbar-toggler-icon icon-bar"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end">
                <ul class="navbar-nav">
                    @if (ViewContext.RouteData.Values["action"].ToString().ToLower() == "register")
                    {
                        if (!string.IsNullOrWhiteSpace(Request.QueryString["partner"]))
                        {
                            <li class="nav-item ">
                                <a href="@Url.Action("login", new { partner = Request.QueryString["partner"] })" class="nav-link">
                                    <i class="material-icons">fingerprint</i>
                                    @Resources.General.LogIn
                                </a>
                            </li>
                        }
                        else
                        {
                            <li class="nav-item ">
                                <a href="@Url.Action("login")" class="nav-link">
                                    <i class="material-icons">fingerprint</i>
                                    @Resources.General.LogIn
                                </a>
                            </li>
                        }
                    }
                    else if (ViewContext.RouteData.Values["action"].ToString().ToLower() == "login")
                    {
                        if (!string.IsNullOrWhiteSpace(Request.QueryString["partner"]))
                        {
                            <li class="nav-item ">
                                <a href="@Url.Action("register", new { partner = Request.QueryString["partner"] })" class="nav-link">
                                    <i class="material-icons">person_add</i>
                                    @Resources.General.Register
                                </a>
                            </li>
                        }
                        else
                        {
                            <li class="nav-item ">
                                <a href="@Url.Action("register")" class="nav-link">
                                    <i class="material-icons">person_add</i>
                                    @Resources.General.Register
                                </a>
                            </li>
                        }
                    }
                    else
                    {
                        <li class="nav-item ">
                            <a href="@Url.Action("login")" class="nav-link">
                                <i class="material-icons">fingerprint</i>
                                @Resources.General.LogIn
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="@Url.Action("register")" class="nav-link">
                                <i class="material-icons">person_add</i>
                                @Resources.General.Register
                            </a>
                        </li>
                    }

                    @{
                        System.Globalization.CultureInfo currentCulture = System.Threading.Thread.CurrentThread.CurrentCulture;
                        if (Resources.General.lang == "ar")
                        {
                            <li class="nav-item"><a class="nav-link" href="~/Base/ChangeCurrentCulture/0" style="font-weight: bold;"><i class="material-icons">language</i> English</a></li>
                        }
                        else if (Resources.General.lang == "en")
                        {
                            <li class="nav-item "><a class="nav-link" href="~/Base/ChangeCurrentCulture/3" style="font-size: 18px;font-weight: bold;"><i class="material-icons">language</i> عربي</a></li>
                        }
                        else
                        {
                            <li class="nav-item"><a class="nav-link" href="~/Base/ChangeCurrentCulture/0" style="font-weight: bold;"><i class="material-icons">language</i> English</a></li>
                            <li class="nav-item "><a class="nav-link" href="~/Base/ChangeCurrentCulture/3" style="font-size: 18px;font-weight: bold;"><i class="material-icons">language</i> عربي</a></li>
                        }
                    }

                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->
    <div class="wrapper wrapper-full-page">
        <div @if (@ViewBag.BG == null) { <text> class="login-page page-header header-filter" </text>  } else { <text> class="login-page page-header " </text> } filter-color="green" style="background:url('@Url.Content(@ViewBag.BG??"~/assets/img/background.jpg")') no-repeat center 43% fixed;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;">
            <!--   you can change the color of the filter page using: data-color="blue | purple | green | orange | red | rose " -->
            
            <!-- Portal Hero Section -->
            <div class="portal-hero">
                @if (Resources.General.lang == "ar")
                {
                    <h1>منصة برنامج بناء القدرات</h1>
                    <h2>التوسع من أجل التأثير</h2>
                    <p>لتحقيق التميز المؤسسي والتأثير المستدام</p>
                    <p>دعم المنظمات غير الربحية وتمكينها ومساعدتها على النمو والابتكار</p>
                }
                else
                {
                    <h1>Capacity Building Program Portal</h1>
                    <h2>Scaling for impact</h2>
                    <p>We empower nonprofits and companies to deliver sustainable social and economic change</p>
                }
            </div>

            @RenderBody()
            <!-- Footer -->
            <footer class="footer">
                <div class="container">
                    <nav class="float-left">
                        <ul>
                            <li>
                                @if (Resources.General.dir == "rtl")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/%D8%B9%D9%86-%D8%A7%D9%84%D9%85%D8%A4%D8%B3%D8%A9/">
                                        @Resources.General.AboutUs
                                    </a>
                                }
                                else if (Resources.General.dir == "ltr")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/en/about-us/">
                                        @Resources.General.AboutUs
                                    </a>
                                }
                            </li>
                            <li>
                                @if (Resources.General.dir == "rtl")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/%D8%A3%D8%B9%D9%85%D8%A7%D9%84%D9%86%D8%A7/">
                                        @Resources.General.Blog
                                    </a>
                                }
                                else if (Resources.General.dir == "ltr")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/en/our-work/">
                                        @Resources.General.Blog
                                    </a>
                                }
                            </li>
                            <li>
                                @if (Resources.General.dir == "rtl")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/%D8%A3%D8%AE%D8%A8%D8%A7%D8%B1%D9%86%D8%A7/">
                                        @Resources.General.Licenses
                                    </a>
                                }
                                else if (Resources.General.dir == "ltr")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/en/News/">
                                        @Resources.General.Licenses
                                    </a>
                                }
                            </li>
                            <li>
                                <a href="#KKF" data-toggle="modal" data-target="#myModal">
                                    @Resources.General.Help
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <div class="copyright float-right">
                        @if (Resources.General.dir == "rtl")
                        {
                            <text>
                                @Resources.General.AllRightsReserved @DateTime.Now.Year
                            </text>
                        }
                        else if (Resources.General.dir == "ltr")
                        {
                            <text>
                                &copy;@DateTime.Now.Year @Resources.General.AllRightsReserved
                            </text>
                        }
                    </div>
                </div>
            </footer>
            <!-- End Footer -->
        </div>
    </div>

    <!-- Classic Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title"><b>@Resources.General.Help</b></h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <i class="material-icons">clear</i>
                    </button>
                </div>
                <div class="modal-body" style="direction: @Resources.General.dir;text-align: @Resources.General.TextAlign;">
                    <p>
                        <b>@Resources.General.SupportMsg</b>
                        <br />
                        <b>@Resources.General.Email: </b><a href="mailto:it@kkf.org.sa">it@kkf.org.sa</a>
                        <br />
                        <b>@Resources.General.Phone: </b><a href="tel:0112020202">0112020202 &nbsp;</a><b>@Resources.General.Ext: </b> <a href="#KKF">5333</a><b> & </b><a href="#KKF"> 3115</a>
                    </p>
                </div>
                <div class="modal-footer">
                    <a class="btn btn-link" target="_blank" href="~/assets/Manual/CB_C_Manual.pdf">@Resources.General.CB_Instructions</a>
                    <button type="button" class="btn btn-danger btn-link" data-dismiss="modal">@Resources.General.Close</button>
                </div>
            </div>
        </div>
    </div>
    <!--  End Modal -->
    <!--   Core JS Files   -->
    <script src="~/Scripts/jquery-3.7.1.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/respond.min.js"></script>
    <script src="~/assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="~/assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="~/assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
    <!-- Plugin for the momentJs  -->
    <script src="~/assets/js/plugins/moment.min.js"></script>
    <!--  Plugin for Sweet Alert -->
    <script src="~/assets/js/plugins/sweetalert2.js"></script>
    <!-- Forms Validations Plugin -->
    <!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
    <script src="~/assets/js/plugins/jquery.bootstrap-wizard.js"></script>
    <!--	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
    <script src="~/assets/js/plugins/bootstrap-selectpicker.js"></script>
    <!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
    <script src="~/assets/js/plugins/bootstrap-datetimepicker.min.js"></script>
    <!--  DataTables.net Plugin, full documentation here: https://datatables.net/    -->
    <script src="~/assets/js/plugins/jquery.dataTables.min.js"></script>
    <!--	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
    <script src="~/assets/js/plugins/bootstrap-tagsinput.js"></script>
    <!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
    <script src="~/assets/js/plugins/jasny-bootstrap.min.js"></script>
    <!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
    <script src="~/assets/js/plugins/fullcalendar.min.js"></script>
    <!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
    <script src="~/assets/js/plugins/jquery-jvectormap.js"></script>
    <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
    <script src="~/assets/js/plugins/nouislider.min.js"></script>
    <!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support SweetAlert -->
    <script src="~/assets/js/core.js"></script>
    <!-- Library for adding dinamically elements -->
    <script src="~/assets/js/plugins/arrive.min.js"></script>
    <!--  Google Maps Plugin    -->
    <script src="~/assets/js/js.js"></script>
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="~/assets/js/buttons.js"></script>
    <!-- Chartist JS -->
    <script src="~/assets/js/plugins/chartist.min.js"></script>
    <!--  Notifications Plugin    -->
    <script src="~/assets/js/plugins/bootstrap-notify.js"></script>
    <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="~/assets/js/material-dashboard.min.js?v=2.0.2" type="text/javascript"></script>
    <!-- Material Dashboard DEMO methods, don't include it in your project! -->
    <script src="~/assets/demo/demo.js"></script>
    <script>
        $(document).ready(function () {
            demo.checkFullPageBackgroundImage();
            demo.initMaterialWizard();
            setTimeout(function () {
                $('.card').removeClass('card-hidden');
                $('.card.card-wizard').addClass('active');
            }, 700);
        });
    </script>
    <script>
        function setFormValidation(id) {
            $(id).validate({
                highlight: function (element) {
                    $(element).closest('.form-group').removeClass('has-success').addClass('has-danger');
                    $(element).closest('.form-check').removeClass('has-success').addClass('has-danger');
                },
                success: function (element) {
                    $(element).closest('.form-group').removeClass('has-danger').addClass('has-success');
                    $(element).closest('.form-check').removeClass('has-danger').addClass('has-success');
                },
                errorPlacement: function (error, element) {
                    $(element).append(error);
                },
            });
        }
    </script>
    @RenderSection("scripts", required: false)
    <script>
        $(document).ready(function () {
            $('form').one('submit', function () {
                $(this).find("input[type='submit']").prop('disabled', true);
                $(this).find('input[type="submit"]').attr('disabled', 'disabled');
                $(this).find("button[type='submit']").prop('disabled', true);
                $(this).find('button[type="submit"]').attr('disabled', 'disabled');
            });
            $('form').submit(function () {
                $(this).find("input[type='submit']").prop('disabled', true);
                $(this).find('input[type="submit"]').attr('disabled', 'disabled');
                $(this).find("button[type='submit']").prop('disabled', true);
                $(this).find('button[type="submit"]').attr('disabled', 'disabled');
            });
            $('input').focusout(function () {
                if ($(this).val() != '') {
                    $(':input[type="submit"]').prop('disabled', false);
                    $(':button[type="submit"]').prop('disabled', false);

                    $(':input[type="submit"]').removeAttr('disabled');
                    $(':button[type="submit"]').removeAttr('disabled');
                }
            });
            $('select').change(function () {
                if ($(this).val() != '') {
                    $(':input[type="submit"]').prop('disabled', false);
                    $(':button[type="submit"]').prop('disabled', false);

                    $(':input[type="submit"]').removeAttr('disabled');
                    $(':button[type="submit"]').removeAttr('disabled');
                }
            });
            $('textarea').focusout(function () {
                if ($(this).val() != '') {
                    $(':input[type="submit"]').prop('disabled', false);
                    $(':button[type="submit"]').prop('disabled', false);

                    $(':input[type="submit"]').removeAttr('disabled');
                    $(':button[type="submit"]').removeAttr('disabled');
                }
            });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var lang = document.documentElement.lang;

            // الحصول على جميع العناصر داخل body
            var elements = document.body.querySelectorAll('*');

            // قائمة بالكلاسات التي نريد استثنائها
            var excludedClasses = [
                'logo',
                'simple-text',
                'logo-mini',
                'logo-normal',
                'sidebar-wrapper',
                'ps-container',
                'ps-theme-default',
                'user',
                'photo',
                'collapse',
                'nav',
                'nav-item',
                'text_align-center',
                'text_align-center',
                'material-icons',
                'table',
                'sidebar',
                'text_align-center',
                'portal-hero',
                '.btn.btn-fab .fa, .btn.btn-fab .material-icons, .btn.btn-just-icon .fa, .btn.btn-just-icon .material-icons'
            ];

            if (lang === "ar") {
                document.body.classList.add("rtl");
                document.body.classList.remove("ltr");

                // تعيين الخصائص للعناصر داخل body ما عدا العناصر المستثناة
                elements.forEach(function (element) {
                    var computedStyle = window.getComputedStyle(element);

                    // التحقق إذا كان العنصر يحتوي على أي من الكلاسات المستثناة
                    var hasExcludedClass = excludedClasses.some(function (className) {
                        return element.classList.contains(className);
                    });

                    // استبعاد العناصر التي تحتوي على الكلاسات المستثناة أو text-align: center أو justify-content: center
                    if (!hasExcludedClass && computedStyle.textAlign !== 'center' && computedStyle.justifyContent !== 'center') {
                        element.style.direction = 'rtl';
                        element.style.textAlign = 'right';
                    }
                });
            } else {
                document.body.classList.add("ltr");
                document.body.classList.remove("rtl");

                // تعيين الخصائص للعناصر داخل body ما عدا العناصر المستثناة
                elements.forEach(function (element) {
                    var computedStyle = window.getComputedStyle(element);

                    // التحقق إذا كان العنصر يحتوي على أي من الكلاسات المستثناة
                    var hasExcludedClass = excludedClasses.some(function (className) {
                        return element.classList.contains(className);
                    });

                    // استبعاد العناصر التي تحتوي على الكلاسات المستثناة أو text-align: center أو justify-content: center
                    if (!hasExcludedClass && computedStyle.textAlign !== 'center' && computedStyle.justifyContent !== 'center') {
                        element.style.direction = 'ltr';
                        element.style.textAlign = 'left';
                    }
                });
            }
        });
    </script>
</body>
</html>