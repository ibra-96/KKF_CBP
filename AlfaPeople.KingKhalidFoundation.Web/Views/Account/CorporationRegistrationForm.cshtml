@model AlfaPeople.KingKhalidFoundation.Web.Models.CorporationRegistrationFormVM
@{
    Layout = null;
}
@{
    int activeTab = TempData["ActiveTab"] != null ? (int)TempData["ActiveTab"] : 1;
}
<!DOCTYPE html>
<html lang="@Resources.General.lang" style="direction:@Resources.General.dir; text-align:@Resources.General.TextAlign;">
<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="~/assets/img/piclogo.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>King Khalid Foundation</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="~/assets/css/css.css" />
    <link rel="stylesheet" href="~/assets/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="~/assets/css/material-dashboard.min.css?v=2.0.2" rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="~/assets/demo/demo.css" rel="stylesheet" />

    <link href="~/assets/jquery-ui.css" rel="stylesheet" />
    <link href="~/assets/css/FileUploaderStyle.css" rel="stylesheet" />
    <style>
        .field-validation-error {
            color: red;
            display: block;
            font-size: 11px;
        }

        input[type=text] {
            background-color: white;
        }
        .is-invalid {
            border: 2px solid red !important;
            background-color: #ffe6e6;
        }

    </style>


    <style>
        .ajs-message.ajs-custome {
            color: white;
            background-color: dimgrey;
            border-color: #31708f;
            text-align: center;
            font-size: medium;
        }

        .ajs-message.ajs-custome2 {
            color: indianred;
            background-color: dimgrey;
            border-color: #31708f;
            text-align: center;
            font-size: medium;
        }
    </style>
</head>

<body dir="@Resources.General.dir" class="@Resources.General.dir" @if (Resources.General.lang == "ar") { <text> style="font-family: 'Suisse', 'Lucida Grande', 'Droid Arabic Kufi', Arial, sans-serif !important;text-align:right" </text>  } else { <text> style="font-family: 'Mabry', 'Lucida Grande', Arial, sans-serif !important;" </text> }>
    <!-- Extra details for Live View on GitHub Pages -->
    <!-- Google Tag Manager (noscript) -->
    <noscript>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="wrapper ">
        <div class="main-panel" style="width:100%; max-width:100%;">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top " style="direction:@Resources.General.dir;" id="navigation-example">
                <div class="container">
                    <div class="navbar-wrapper">
                        <img src="~/assets/img/logo1.png" class="navbar-brand" style="height:100px;padding:0;" />
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation" data-target="#navigation-example">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="navbar-toggler-icon icon-bar"></span>
                        <span class="navbar-toggler-icon icon-bar"></span>
                        <span class="navbar-toggler-icon icon-bar"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                @{
                                    System.Globalization.CultureInfo cultureInfo = System.Threading.Thread.CurrentThread.CurrentCulture;
                                    if (Resources.General.lang == "ar")
                                    {
                                        <a class="nav-link" href="~/Base/ChangeCurrentCulture/0" style="font-weight: bold;"><i class="material-icons">language</i> English</a>
                                    }
                                    else if (Resources.General.lang == "en")
                                    {
                                        <a class="nav-link" href="~/Base/ChangeCurrentCulture/3" style="font-size: 18px;font-weight: bold;"><i class="material-icons">language</i> عربي</a>
                                    }
                                    else
                                    {
                                        <a class="nav-link" href="~/Base/ChangeCurrentCulture/0" style="font-weight: bold;"><i class="material-icons">language</i> English</a>
                                        <a class="nav-link" href="~/Base/ChangeCurrentCulture/3" style="font-size: 18px;font-weight: bold;"><i class="material-icons">language</i> عربي</a>
                                    }
                                }
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- End Navbar -->
            <!-- Content -->
            <div class="content">
                <div class="container-fluid">
                    <div class="col-md-10 col-12 mr-auto ml-auto">
                        <!--      Wizard container        -->
                        <div class="wizard-container">
                            @if (TempData["SuccessMessage"] != null && TempData["SuccessMessage"].ToString() != "")
                            {
                                <div class="alert alert-success text-center">
                                    @TempData["SuccessMessage"]
                                </div>
                            }
                            @if (TempData["ErrorMessage"] != null && TempData["ErrorMessage"].ToString() != "")
                            {
                                <div class="alert alert-danger text-center">
                                    @TempData["ErrorMessage"]
                                </div>
                            }

                            <div class="card card-wizard" data-color="rose" id="wizardProfile">
                                @using (Html.BeginForm("CorporationRegistrationForm", "Account", FormMethod.Post, new { @id = "mytestForm", enctype = "multipart/form-data" }))
                                {
                                    @Html.AntiForgeryToken()
                                    @Html.HiddenFor(f => f._RegisterVM._RegisterViewModel.UserRoles)
                                    @Html.HiddenFor(f => f._RegisterVM._RegisterViewModel.ConfirmPassword)


                                    <!--        You can switch " data-color="primary" "  with one of the next bright colors: "green", "orange", "red", "blue"       -->
                                    <div class="card-header text-center">
                                        <h3 class="card-title">
                                            @Resources.CorporationProfile.BuildYourProfile
                                        </h3>
                                        <h5 class="card-description">@Resources.CorporationProfile.InformationToBeKnowed</h5>
                                        <h5 class="info-text" style="color: #c0a979;"> @Resources.CorporationProfile.CorporationNameNote </h5>
                                    </div>
                                    <div class="wizard-navigation">
                                        <ul class="nav nav-pills">
                                            <li class="nav-item">
                                                <a class="nav-link active" href="#BasicData" data-toggle="tab" role="tab">
                                                    @Resources.CorporationProfile.BasicData
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="#Contacts" data-toggle="tab" role="tab">
                                                    @Resources.CorporationProfile.Contacts
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="#Account" data-toggle="tab" role="tab">
                                                    @Resources.CorporationProfile.Account
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="#Attachment" data-toggle="tab" role="tab">
                                                    @Resources.CorporationProfile.Attachment
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-body">
                                        <div class="tab-content">
                                            @*<div class="tab-pane active" id="BasicData">
                                                @Html.ValidationMessage("Errors")

                                                <h5 class="info-text"> @Resources.CorporationProfile.BasicInformation </h5>
                                                <div class="row justify-content-center">
                                                    <div class="col-sm-4">
                                                        <div class="picture-container">
                                                            <div class="picture">
                                                                @{
                                                                    var base64 = Convert.ToBase64String(Model._CorporateApplicationForm.Picture);
                                                                    var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                                                                }

                                                                <img src="@imgSrc" name="_CorporateApplicationForm.picture" class="picture-src" id="wizardPicturePreview" title="" />
                                                                <input id="wizard-picture" type="file" name="file" accept=".png, .jpg, .jpeg" />
                                                            </div>
                                                            <label class="label">@Resources.CorporationProfile.UploadCorpratePhoto</label>
                                                            @Html.ValidationMessageFor(model => model.file, "", new { @class = "text-danger" })
                                                        </div>
                                                    </div>*@
                                            <div class="tab-pane active" id="BasicData">
                                                <div class="row justify-content-center">
                                                    <div class="col-sm-4">
                                                        <div class="picture-container">
                                                            @*<div class="picture">
                                                                    @{
                                                                        var base64 = Convert.ToBase64String(Model._CorporateApplicationForm.Picture);
                                                                        var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                                                                    }

                                                                    <img src="@imgSrc" name="_CorporateApplicationForm.picture" class="picture-src" id="wizardPicturePreview" title="" />
                                                                    <input id="wizard-picture" type="file" name="file" accept=".png, .jpg, .jpeg" />
                                                                </div>*@


                                                            <div class="picture">
                                                                @{
                                                                    var base64 = Model._CorporateApplicationForm.Picture != null
                                                                        ? Convert.ToBase64String(Model._CorporateApplicationForm.Picture)
                                                                        : null;
                                                                    var imgSrc = base64 != null
                                                                        ? $"data:image/png;base64,{base64}"
                                                                        : Url.Content("~/assets/img/default-avatar.png");
                                                                }
                                                                <img src="@imgSrc" class="picture-src" name="_CorporateApplicationForm.picture" id="wizardPicturePreview" title="" />
                                                                <input id="wizard-picture" type="file" name="file" accept=".png, .jpg, .jpeg" />
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="col-sm-6">
                                                        @*<h5 class="info-text" style="color: red;"> @Resources.CorporationProfile.CorporationNameNote </h5>*@
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">

                                                                <label for="Inp_Name" class="bmd-label-floating">
                                                                    @Resources.CorporationRegistered.CorporationName
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.Name, new { @class = "form-control", @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.Name)
                                                            </div>
                                                        </div>
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Date"> @Resources.CorporationRegistered.FoundedYear </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.FoundedYear, new
                                                                      {
                                                                          @class = "form-control",
                                                                          @id = "FoundedYear",

                                                                          @Value = ViewBag.FoundedYear, // استخدام التاريخ بدون وقت
                                                                          @required = "required"
                                                                      })

                                                                @*@Html.TextBoxFor(f => f._CorporateApplicationForm.FoundedYear, new
                                                                    {
                                                                        @class = "form-control ",
                                                                        @id = "FoundedYear" , @required = "required"})*@
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.FoundedYear)
                                                            </div>

                                                            @*<div class="input-group form-control-lg">
                                                                    <div class="form-group">
                                                                        <label for="Inp_Date"> @Resources.CorporationRegistered.FoundedYear </label>
                                                                        @Html.TextBoxFor(f => f._CorporateApplicationForm.FoundedYear, new { @class = "form-control ", @id = "FoundedYear", @required = "required" })
                                                                        @Html.ValidationMessageFor(f => f._CorporateApplicationForm.FoundedYear)
                                                                    </div>
                                                                </div>*@

                                                        </div>


                                                    </div>
                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group select-wizard">
                                                                <label for="dbd_Join" class="bmd-label-floating">@Resources.CorporationRegistered.Sector</label>
                                                                @if (ViewBag.CorporationsCategoryID != null && ((IEnumerable<SelectListItem>)ViewBag.CorporationsCategoryID).Any())
                                                                {
                                                                    @Html.DropDownListFor(f => f._CorporateApplicationForm.CorporationsCategoryID,
                                                                        (IEnumerable<SelectListItem>)ViewBag.CorporationsCategoryID,
                                                                        Resources.General.SelectSector,
                                                                        new { @class = "select-wizard form-control selectpicker", @required = "required", data_style = "select-with-transition", @id = "ddlCategory" })
                                                                }
                                                                else
                                                                {

                                                                }
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.CorporationsCategoryID)
                                                            </div>

                                                        </div>
                                                        <div id="Div_FieldOfWork" class="input-group form-control-lg">
                                                            <div class="form-group select-wizard">
                                                                <label for="dbd_Join" class="bmd-label-floating">@Resources.CorporationRegistered.FieldOfWork</label>
                                                                @Html.DropDownListFor(f => f._CorporateApplicationForm.CorporateFieldOfWorkID, (SelectList)ViewBag.CorporateFieldOfWorkID, new { @class = "select-wizard form-control selectpicker", data_style = "select-with-transition", @title = Resources.General.SelectFieldOfWork })
                                                            </div>
                                                        </div>
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="_CorporateApplicationForm_RegistrationNumber" style="margin-right:10%;">
                                                                    @Resources.CorporationRegistered.CorporationRegitrationNumber
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.RegistrationNumber, new
                                                                {
                                                                    @class = "form-control",
                                                                    @maxlength = "20",
                                                                    @required = "required"
                                                        })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.RegistrationNumber)
                                                            </div>
                                                        </div>
                                                        @*<div id="Div_DateElection" class="input-group form-control-lg">
                                                                <div class="form-group">
                                                                    <label for="DateElection"> @Resources.CorporationRegistered.DateElection </label>
                                                                    @Html.EditorFor(f => f._CorporateApplicationForm.DateElection, new { htmlAttributes = new { @class = "form-control ", @id = "DateElection" } })
                                                                </div>
                                                            </div>*@
                                                        <div id="Div_DateElection" class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="DateElection"> @Resources.CorporationRegistered.DateElection </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.DateElection, new
                                                           {
                                                               @class = "form-control",
                                                               @id = "DateElection",

                                                               @Value = ViewBag.DateElection, // استخدام التاريخ بدون وقت
                                                               @required = "required"
                                                           })
                                                                @*@Html.EditorFor(f => f._CorporateApplicationForm.DateElection, new { htmlAttributes = new { @class = "form-control",
                                                                    @Value = ViewBag.DateElection, @id = "DateElection" } })*@
                                                            </div>
                                                        </div>

                                                    </div>

                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">


                                                            <div class="form-group select-wizard">
                                                                <label for="dbd_csnp" class="bmd-label-floating">
                                                                    @Resources.CorporationRegistered.NonProfitSectorType
                                                                </label>
                                                                @*<select id="Sectors" name="Sectors" class="select-wizard form-control selectpicker" data-style="select-with-transition"
                                                                            data-selected-value="@Model._CorporateApplicationForm.ClassificationSectorID" title="@Resources.General.SelectSector">
                                                                    </select>*@
                                                                @*@Html.DropDownListFor(f => f._CorporateApplicationForm.ClassificationSectorID,
                                                                        new SelectList(ViewBag.ClassificationSectorID, "Value", "Text", Model._CorporateApplicationForm.ClassificationSectorID),
                                                                        new
                                                                    {
                                                                            @class = "select-wizard form-control selectpicker",
                                                                            @required = "required",
                                                                            @id = "Sectors",
                                                                            data_style = "select-with-transition",
                                                                            @title = Resources.General.SelectSector
                                                                        })*@
                                                                @Html.DropDownListFor(f => f._CorporateApplicationForm.ClassificationSectorID,
                                                                  (SelectList)ViewBag.ClassificationSectorID,
                                                                  new
                                                                  {
                                                                      @class = "select-wizard form-control selectpicker",
                                                                      @required = "required",
                                                                      @id = "Sectors",
                                                                      data_style = "select-with-transition",
                                                                      @title = Resources.General.SelectSector
                                                                  })

                                                                @*@Html.DropDownListFor(f => f._CorporateApplicationForm.ClassificationSectorID, (SelectList)ViewBag.ClassificationSectorID, new { @class = "select-wizard form-control selectpicker", @required = "required", @id = "Sectors", data_style = "select-with-transition", @title = "Select Sector" })*@
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.ClassificationSectorID)
                                                            </div>



                                                        </div>


                                                        <div id="Div_CorporateGenderType" class="input-group form-control-lg" style="display: none;">
                                                            <div class="form-group select-wizard">
                                                                <label for="_CorporateApplicationForm_corporateGenderType" class="bmd-label-floating">
                                                                    @Resources.CorporationRegistered.GenderTypeOnTheOrganization
                                                                </label>
                                                                @Html.EnumDropDownListFor(f => f._CorporateApplicationForm.corporateGenderType,
                                                                    new
                                                                {
                                                                        @class = "select-wizard form-control selectpicker",
                                                                        data_style = "select-with-transition",
                                                                        @title = Resources.General.SelectGenderType
                                                                    })

                                                            </div>
                                                        </div>

                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group select-wizard">
                                                                <label for="Inp_AuthorizationAuthority" class="bmd-label-floating">
                                                                    @Resources.General.AuthorizationAuthority
                                                                </label>
                                                                @Html.DropDownListFor(f => f._CorporateApplicationForm.AuthorizationAuthorityID, (SelectList)ViewBag.AuthorizationAuthorityID, new { @class = "select-wizard form-control selectpicker", @required = "required", data_style = "select-with-transition", @title = Resources.General.SelectAuthority })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.AuthorizationAuthorityID)
                                                            </div>
                                                        </div>
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="_CorporateApplicationForm_TaxNumber">
                                                                    @Resources.CorporationRegistered.TaxNumber
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.TaxNumber, new { @class = "form-control", @oninput = "this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-10">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_About" class="bmd-label-floating">
                                                                    @Resources.CorporationRegistered.ABriefHistoryOftheCorporationAssociation
                                                                </label>
                                                                @Html.TextAreaFor(f => f._CorporateApplicationForm.History, new { @class = "form-control", @rows = "2", @style = "width: 113%", @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.History)
                                                            </div>
                                                        </div>
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Vision" class="bmd-label-floating">@Resources.CorporationRegistered.Vision</label>
                                                                @Html.TextAreaFor(f => f._CorporateApplicationForm.Vision, new { @class = "form-control", @rows = "2", @style = "width: 113%", @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.Vision)
                                                            </div>
                                                        </div>
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Mission" class="bmd-label-floating">@Resources.CorporationRegistered.Mission</label>
                                                                @Html.TextAreaFor(f => f._CorporateApplicationForm.Mission, new { @class = "form-control", @rows = "2", @style = "width: 113%", @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.Mission)
                                                            </div>
                                                        </div>
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Objectives" class="bmd-label-floating">@Resources.CorporationRegistered.Objectives</label>
                                                                @Html.TextAreaFor(f => f._CorporateApplicationForm.Objectives, new { @class = "form-control", @rows = "2", @style = "width: 113%", @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.Objectives)
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane" id="Contacts">
                                                <div class="row justify-content-center">
                                                    @*<div class="col-sm-3">
                                                            <div class="input-group form-control-lg">
                                                                <div class="form-group select-wizard">
                                                                    <label for="dbd_Countries" class="bmd-label-floating" style="margin-right:100%">@Resources.CorporationProfile.Region</label>
                                                                    @Html.DropDownListFor(f => f._CorporateApplicationForm.RegionID, (SelectList)ViewBag.RegionID, new { @class = "select-wizard form-control selectpicker", @required = "required", data_style = "select-with-transition", @id = "Region", @title = Resources.General.SelectRegion })
                                                                    @Html.ValidationMessageFor(f => f._CorporateApplicationForm.RegionID)
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div class="input-group form-control-lg">
                                                                <div class="form-group select-wizard">
                                                                    <label for="dbd_States" class="bmd-label-floating" style="margin-right:100%">@Resources.CorporationProfile.Governorate</label>
                                                                    <select id="Governorate" name="_CorporateApplicationForm.GovernorateID" required class="select-wizard form-control selectpicker" data-style="select-with-transition"
                                                                            title="@Resources.General.SelectGovernorate"></select>
                                                                    @Html.ValidationMessageFor(f => f._CorporateApplicationForm.GovernorateID)
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="input-group form-control-lg">
                                                                <div class="form-group select-wizard">
                                                                    <label for="dbd_Cities" class="bmd-label-floating" style="margin-right:100%">@Resources.CorporationProfile.Neighborhoods</label>
                                                                    <select id="City" name="_CorporateApplicationForm.CityID" class="select-wizard form-control selectpicker" data-style="select-with-transition"
                                                                            title="@Resources.General.SelectNeighborhoods"></select>
                                                                </div>
                                                            </div>
                                                        </div>*@
                                                    <div class="col-sm-3">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group select-wizard">
                                                                <label>@Resources.CorporationProfile.Region</label>
                                                                @Html.DropDownListFor(f => f._CorporateApplicationForm.RegionID,
                                                                    (SelectList)ViewBag.RegionID,
                                                                    new { @class = "select-wizard form-control selectpicker", @id = "Region", data_style = "select-with-transition", @title = Resources.General.SelectRegion, @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.RegionID)
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-3">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group select-wizard">
                                                                <label>@Resources.CorporationProfile.Governorate</label>
                                                                @Html.DropDownListFor(f => f._CorporateApplicationForm.GovernorateID,
                                                                    (SelectList)ViewBag.GovernorateID,
                                                                    new { @class = "select-wizard form-control selectpicker", @id = "Governorate", data_style = "select-with-transition", @title = Resources.General.SelectGovernorate, @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.GovernorateID)


                                                                @*@Html.DropDownListFor(f => f._CorporateApplicationForm.GovernorateID,
                                                                    (SelectList)ViewBag.GovernorateID ?? new SelectList(new List<SelectListItem>()),
                                                                    "-- اختر المحافظة --",
                                                                    new { @class = "select-wizard form-control selectpicker", @id = "Governorate", data_style = "select-with-transition" })*@

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-4">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group select-wizard">
                                                                <label>@Resources.CorporationProfile.Neighborhoods</label>
                                                                @Html.DropDownListFor(f => f._CorporateApplicationForm.CityID,
        (SelectList)ViewBag.CityID,
        new { @class = "select-wizard form-control selectpicker", @id = "City", data_style = "select-with-transition", @title = Resources.General.SelectNeighborhoods })

                                                                @*@Html.DropDownListFor(f => f._CorporateApplicationForm.CityID,
                                                                    (SelectList)ViewBag.CityID ?? new SelectList(new List<SelectListItem>()),
                                                                    "-- اختر الحي --", // هذا هو الـ OptionLabel الافتراضي
                                                                    new { @class = "select-wizard form-control selectpicker", @id = "City", data_style = "select-with-transition" })*@

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-3">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Address" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.Address
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.Address, new { @class = "form-control ", @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.Address)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_PostalCode" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.PostalCode
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.PostalCode, new { @class = "form-control ", @required = "required", @oninput = "this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.PostalCode)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_POBox" class="bmd-label-floating">@Resources.CorporationProfile.POBox </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.POBox, new { @class = "form-control ", @oninput = "this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.POBox)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_TelephoneNumber2" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.TelephoneNumber
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.TelephoneNumber, new { @class = "form-control ", @required = "required", @oninput = "this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.TelephoneNumber)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Exten" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.Extension
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.Extension, new { @class = "form-control ", @oninput = "this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.Extension)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_FaxNumber" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.FaxNumber
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.FaxNumber, new { @class = "form-control ", @oninput = "this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.FaxNumber)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_OficialEmail" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.OficialEmail
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.OfficialEmail, new { @class = "form-control ", @required = "required", @type = "email" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.OfficialEmail)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Website" class="bmd-label-floating">@Resources.CorporationProfile.Website</label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.Website, new
                                                                {
                                                                    @class = "form-control "
                                                                })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.Website)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_TwitterAccount" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.TwitterAccount
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.TwitterAccount, new { @class = "form-control" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.TwitterAccount)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_YouTubeAccount" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.YouTubeAccount
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.YouTubeAccount, new { @class = "form-control" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.YouTubeAccount)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_SnapchatAccount" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.SnapchatAccount
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.SnapchatAccount, new { @class = "form-control" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.SnapchatAccount)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_InstagramAccount" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.InstagramAccount
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.InstagramAccount, new { @class = "form-control" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.InstagramAccount)
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane" id="Account">
                                                <div class="row justify-content-center">
                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_UserName">@Resources.General.Username</label>
                                                                @Html.HiddenFor(f => f._RegisterVM.Username)
                                                                <input type="text" id="Inp_UserName" name="UserName" value="@Model._RegisterVM.Username" class="form-control" disabled />
                                                                @Html.ValidationMessageFor(f => f._RegisterVM.Username)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Email">@Resources.General.Email </label>
                                                                @Html.HiddenFor(f => f._RegisterVM._RegisterViewModel.Email)
                                                                <input type="text" id="Inp_Email" name="Email" value="@Model._RegisterVM._RegisterViewModel.Email" class="form-control" disabled />
                                                                @Html.ValidationMessageFor(f => f._RegisterVM._RegisterViewModel.Email)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Password">@Resources.General.Password </label>
                                                                @Html.HiddenFor(f => f._RegisterVM._RegisterViewModel.Password)
                                                                <input type="password" class="form-control" id="Inp_Password" value=".........." name="Passwordhsh" disabled>
                                                                @Html.ValidationMessageFor(f => f._RegisterVM._RegisterViewModel.Password)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_AdministratorName" class="bmd-label-floating">
                                                                    @Resources.CorporationRegistered.NameOfAdministratorCorporation
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.CorporateAdministratorName, new { @class = "form-control ", @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.CorporateAdministratorName)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_JobTitle" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.JobTitle
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.CorporateAdministratorJobTitle, new { @class = "form-control ", @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.CorporateAdministratorJobTitle)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_MobileNumber" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.Mobile
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.CorporateAdministratorMobileNumber, new
                                                                {
                                                                    @class = "form-control",
                                                                    @minlength = "10",
                                                                    @maxlength = "14",
                                                                    @required = "required",
                                                                @oninput = "this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');"
                                                            })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.CorporateAdministratorMobileNumber)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_TelephoneNumber" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.TelephoneNumber
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.CorporateAdministratorTelephoneNumber, new { @class = "form-control ", @required = "required", @oninput = "this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.CorporateAdministratorTelephoneNumber)
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Extension" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.Extension
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.CorporateAdministratorExtension, new { @class = "form-control ", @required = "required", @oninput = "this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.CorporateAdministratorExtension)
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-5">
                                                        <div class="input-group form-control-lg">
                                                            <div class="form-group">
                                                                <label for="Inp_Extension" class="bmd-label-floating">
                                                                    @Resources.CorporationProfile.AdministratorEmail
                                                                </label>
                                                                @Html.TextBoxFor(f => f._CorporateApplicationForm.AdministratorEmail, new { @class = "form-control ", @required = "required" })
                                                                @Html.ValidationMessageFor(f => f._CorporateApplicationForm.AdministratorEmail)
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                            @*<div class="tab-pane" id="Attachment">*@






                                            <!--<div class="row justify-content-center">
                                            <div class="col-sm-5">
                                                <div class="input-group form-control-lg">
                                                    <div class="form-group">

                                                        <div class="col-lg-12" style="margin-top: 57px; margin-bottom: 145px;">-->
                                            <!-- Uploader Dropzone -->
                                            <!--<div id="zdrop" class="fileuploader" onclick="document.getElementById('selectedFile').click();">
                                                                    <div id="upload-label" style="width: 350px;">
                                                                        <i class="material-icons">cloud_upload</i>
                                                                        <span class="title">@Resources.CorporationProfile.AttachCertificateRegistration </span>
                                                                        <span id="fileText" style="display: block;"></span>
                                                                        @Html.TextBoxFor(model => model.files, "", new { @id = "selectedFile", @accept = "image/*,.pdf", @type = "file", @multiple = "multiple", @required = "required", @style = "display: none;", @onchange = "getFileName();" })
                                                                        @Html.ValidationMessageFor(model => model.files, "", new { @class = "text-danger" })
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>-->
                                            @*</div>*@
                                            <div class="tab-pane" id="Attachment">
                                                <div class="row justify-content-center">

                                                    <div class="col-md-12" style="margin-top: 57px; margin-bottom: 145px;">
                                                        <!-- Uploader Dropzone -->
                                                        <div id="zdrop" class="fileuploader" onclick="document.getElementById('selectedFile').click();">
                                                            <div id="upload-label" style="width: 350px;">
                                                                <i class="material-icons">cloud_upload</i>
                                                                <span class="title">@Resources.CorporationProfile.AttachCertificateRegistration</span>
                                                                <span id="fileText" style="display: block;"></span>
                                                                @Html.TextBox("files", "", new { @id = "selectedFile", @accept = "image/*,.pdf", @type = "file", @multiple = "multiple", @style = "display: none;", @onchange = "getFileName();" })

                                                                @*@Html.TextBox("files", "", new { @id = "selectedFile", @accept = "image/*,.pdf", @type = "file", @multiple = "multiple", @required = "required", @style = "display: none;", @onchange = "getFileName();" })*@
                                                                @Html.ValidationMessageFor(model => model.files, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-12">
                                                        <div class="material-datatables">
                                                            <table id="AttachmentDatatables" class="table table-striped table-no-bordered table-hover" cellspacing="0" style="width:100%">
                                                                <thead>
                                                                    <tr>
                                                                        <th>@Resources.General.AttachmentName</th>
                                                                        <th>@Resources.General.AttachmentType</th>
                                                                        <th>@Resources.General.AttachmentSize</th>
                                                                        <th class="disabled-sorting">@Resources.General.Actions</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach (var item in Model._CorporateApplicationForm.CorporateApplicationFormAttachments)
                                                                    {
                                                                        <tr>
                                                                            <td>
                                                                                <a class="btn btn-link btn-default" href="@Url.Action("Download", new { id = item.AttachmentID })">
                                                                                    <i class="material-icons">attach_file</i>
                                                                                    @item.Name
                                                                                </a>
                                                                            </td>
                                                                            <td>@item.Type</td>
                                                                            <td>@item.Size Bytes</td>
                                                                            <td class="text-right">
                                                                                <a class="btn btn-link btn-rose btn-just-icon" href="@Url.Action("Download", new { id = item.AttachmentID })">
                                                                                    <i class="material-icons">get_app</i>
                                                                                </a>
                                                                                <button class="btn btn-link btn-danger btn-just-icon remove" type="button" onclick="Delete('@item.AttachmentID')">
                                                                                    <i class="material-icons">delete</i>
                                                                                </button>
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="card-footer d-flex justify-content-between">
                                            <div class="mr-auto">
                                                <button type="button" class="btn btn-previous btn-fill btn-default btn-wd disabled" id="btn_previous" name="previous" value="@Resources.General.previous" title="@Resources.General.previous">
                                                    @Resources.General.previous
                                                </button>
                                            </div>
                                            <div class="ml-auto d-flex">
                                                <input type="hidden" id="actionType" name="actionType" value="" />

                                                <!-- زر حفظ كمسودة -->
                                                <button type="submit" class="btn btn-secondary mr-2" id="btn-secondary" onclick="setActionType('saveAsDraft');">
                                                    @Resources.General.saveAsDraft
                                                </button>

                                                <!-- زر الإرسال النهائي -->
                                                <button type="button" class="btn btn-finish btn-fill btn-rose btn-wd" id="btn_finish">
                                                    @Resources.General.Finish
                                                </button>

                                                <!-- زر التالي -->
                                                <button type="button" class="btn btn-next btn-fill btn-rose btn-wd ml-2" id="btn_next">
                                                    @Resources.General.Next
                                                </button>



                                                <script>
                                                    function setActionType(value) {
                                                        document.getElementById('actionType').value = value;
                                                    }
                                                </script>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                        <!-- wizard container -->
                    </div>
                </div>
            </div>
            <!-- End Content -->
            <!-- Footer -->
            <footer class="footer" style="position:inherit;">
                <div class="container">
                    <nav class="float-left">
                        <ul>
                            <li>
                                @if (Resources.General.dir == "rtl")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/%D8%B9%D9%86-%D8%A7%D9%84%D9%85%D8%A4%D8%B3%D8%B3%D8%A9/">
                                        @Resources.General.AboutUs
                                    </a>
                                }
                                else if (Resources.General.dir == "ltr")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/en/about-us/">
                                        @Resources.General.AboutUs
                                    </a>
                                }
                            </li>
                            <li>
                                @if (Resources.General.dir == "rtl")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/%D8%A3%D8%B9%D9%85%D8%A7%D9%84%D9%86%D8%A7/">
                                        @Resources.General.Blog
                                    </a>
                                }
                                else if (Resources.General.dir == "ltr")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/en/our-work/">
                                        @Resources.General.Blog
                                    </a>
                                }
                            </li>
                            <li>
                                @if (Resources.General.dir == "rtl")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/%D8%A3%D8%AE%D8%A8%D8%A7%D8%B1%D9%86%D8%A7/">
                                        @Resources.General.Licenses
                                    </a>
                                }
                                else if (Resources.General.dir == "ltr")
                                {
                                    <a target="_blank" href="https://kkf.org.sa/en/News/">
                                        @Resources.General.Licenses
                                    </a>
                                }
                            </li>
                            <li>
                                <a href="#KKF" data-toggle="modal" data-target="#myModal">
                                    @Resources.General.Help
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <div class="copyright float-right">
                        @if (Resources.General.dir == "rtl")
                        {
                            <text>
                                @Resources.General.AllRightsReserved @DateTime.Now.Year
                            </text>
                        }
                        else if (Resources.General.dir == "ltr")
                        {
                            <text>
                                &copy;@DateTime.Now.Year @Resources.General.AllRightsReserved
                            </text>
                        }
                    </div>
                </div>
            </footer>
            <!-- End Footer -->
        </div>
    </div>

    <!-- Classic Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title"><b>@Resources.General.Help</b></h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <i class="material-icons">clear</i>
                    </button>
                </div>
                <div class="modal-body" style="direction: @Resources.General.dir;text-align: @Resources.General.TextAlign;">
                    <p>
                        <b>@Resources.General.SupportMsg</b>
                        <br />
                        <b>@Resources.General.Email: </b><a href="mailto:it@kkf.org.sa">it@kkf.org.sa</a>
                        <br />
                        <b>@Resources.General.Phone: </b><a href="tel:0112020202">0112020202 &nbsp;</a><b>@Resources.General.Ext: </b> <a href="#KKF">5333</a><b> & </b><a href="#KKF">3115</a>
                    </p>
                </div>
                <div class="modal-footer">
                    <a class="btn btn-link" target="_blank" href="~/assets/Manual/CB_C_Manual.pdf">@Resources.General.CB_Instructions</a>
                    <button type="button" class="btn btn-danger btn-link" data-dismiss="modal">@Resources.General.Close</button>
                </div>
            </div>
        </div>
    </div>
    <!--  End Modal -->
    <!-- Modal حفظ -->
    <div class="modal fade" id="savingModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-sm modal-dialog-centered">
            <div class="modal-content text-center">
                <div class="modal-body">
                    <i class="fa fa-spinner fa-spin fa-3x text-primary mb-3"></i>
                    <p>الرجاء الانتظار... يتم الآن حفظ البيانات</p>
                </div>
            </div>
        </div>
    </div>

    <script src="~/Scripts/jquery-3.7.1.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>

    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/respond.min.js"></script>
    <script src="~/assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="~/assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="~/assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
    <!-- Forms Validations Plugin -->
    <!-- Plugin for the momentJs  -->
    <script src="~/assets/js/plugins/moment.min.js"></script>
    <!--  Plugin for Sweet Alert -->
    <script src="~/assets/js/plugins/sweetalert2.js"></script>
    <!--  DataTables.net Plugin, full documentation here: https://datatables.net/    -->
    <script src="~/assets/js/plugins/jquery.dataTables.min.js"></script>
    <!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
    <script src="~/assets/js/plugins/jquery.bootstrap-wizard.js"></script>
    <!--	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
    <script src="~/assets/js/plugins/bootstrap-selectpicker.js"></script>
    <!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
    <script src="~/assets/js/plugins/bootstrap-datetimepicker.min.js"></script>
    <script src="~/assets/jquery-ui.js"></script>
    <!--	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
    <script src="~/assets/js/plugins/bootstrap-tagsinput.js"></script>
    <!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
    <script src="~/assets/js/plugins/jasny-bootstrap.min.js"></script>
    <!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
    <script src="~/assets/js/plugins/fullcalendar.min.js"></script>
    <!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
    <script src="~/assets/js/plugins/jquery-jvectormap.js"></script>
    <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
    <script src="~/assets/js/plugins/nouislider.min.js"></script>
    <!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support SweetAlert -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
    <!-- Library for adding dinamically elements -->
    <script src="~/assets/js/plugins/arrive.min.js"></script>
    <!--  Google Maps Plugin    -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2Yno10-YTnLjjn_Vtk0V8cdcY5lC4plU"></script>
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!-- Chartist JS -->
    <script src="~/assets/js/plugins/chartist.min.js"></script>
    <!--  Notifications Plugin    -->
    <script src="~/assets/js/plugins/bootstrap-notify.js"></script>
    <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="~/assets/js/material-dashboard.min.js?v=2.0.2" type="text/javascript"></script>
    <!-- Material Dashboard DEMO methods, don't include it in your project! -->
    <script src="~/assets/demo/demo.js"></script>
    <script type="text/javascript">
    </script>


    <script>
        //function getFileName() {
        //    $('#fileText').html('');
        //    $('#fileText').append($('#selectedFile')[0].files.length + ' Files Selected');
        //}

        $(document).ready(function () {
            if ('@Resources.General.lang' == 'ar') {
                var table = $('#AttachmentDatatables').DataTable({
                    "paging": false,
                    "searching": false,
                    "info": false,
                    "pagingType": "full_numbers",
                    "lengthMenu": false,
                    responsive: true,
                    "language": {
                        "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Arabic.json"
                    }
                });
            } else {
                var table = $('#AttachmentDatatables').DataTable({
                    "paging": false,
                    "searching": false,
                    "info": false,
                    "pagingType": "full_numbers",
                    "lengthMenu": false,
                    responsive: true,
                    language: {
                        search: "_INPUT_",
                        searchPlaceholder: "Search records",
                    }
                });
            }

            // Delete a record
            table.on('click', '.remove', function (e) {
                $tr = $(this).closest('tr');
                table.row($tr).remove().draw();
                e.preventDefault();
                console.log(table.rows().data().length);
            });

        });

        function Delete(Id) {
                swal({
                    title: 'Are you sure?',
                    text: 'You will not be able to recover this file!',
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Yes, delete it!',
                    cancelButtonText: 'No, keep it',
                    confirmButtonClass: "btn btn-success",
                    cancelButtonClass: "btn btn-danger",
                    buttonsStyling: false
                }).then(function () {

                    $.getJSON('@Url.Action("DeleteAttachment")', { Id: Id }, function (Result) {
                        if (Result != null && !jQuery.isEmptyObject(Result)) {
                            //alertify.notify(Result, 'custome', 3, function () { console.log('dismissed'); });
                            if (Result === "Deleted Succsesfully") {
                                swal({
                                    title: 'Deleted!',
                                    text: 'Your imaginary file has been deleted.',
                                    type: 'success',
                                    confirmButtonClass: "btn btn-success",
                                    buttonsStyling: false
                                }).catch(swal.noop)
                            } else {
                                swal({
                                    title: 'Failed',
                                    text: 'failed to delete your imaginary file :)',
                                    type: 'error',
                                    confirmButtonClass: "btn btn-danger",
                                    buttonsStyling: false
                                }).catch(swal.noop)
                            }
                        }
                    });

                }, function (dismiss) {
                    // dismiss can be 'overlay', 'cancel', 'close', 'esc', 'timer'
                    if (dismiss === 'cancel') {
                        swal({
                            title: 'Cancelled',
                            text: 'Your imaginary file is safe :)',
                            type: 'error',
                            confirmButtonClass: "btn btn-info",
                            buttonsStyling: false
                        }).catch(swal.noop)
                    }
                })
        }
    </script>




    @*<script>
            function getFileName() {
                $('#fileText').html('');
                $('#fileText').append($('#selectedFile')[0].files.length + ' Files Selected');
            }
        </script>*@
    <script>
        function getFileName() {
            const input = document.getElementById("selectedFile");
            const files = input.files;
            const allowedExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.pdf'];

            let invalidFiles = [];
            let fileNames = [];

            for (let i = 0; i < files.length; i++) {
                const fileName = files[i].name.toLowerCase();
                const isValid = allowedExtensions.some(ext => fileName.endsWith(ext));
                if (!isValid) {
                    invalidFiles.push(fileName);
                } else {
                    fileNames.push(fileName);
                }
            }

            if (invalidFiles.length > 0) {
                alert("🚫 الملفات غير المسموح بها:\n" + invalidFiles.join("\n") + "\n\n✅ الملفات المسموحة: PDF أو صور فقط (jpg, jpeg, png, gif)");
                input.value = ''; // إفراغ الملفات
                $('#fileText').html(''); // تفريغ النص
                return;
            }

            // عرض أسماء الملفات المقبولة
            $('#fileText').html(fileNames.length + ' Files Selected');
        }
    </script>


    <script>
        $(document).ready(function () {
            // Initialise the wizard
            demo.initMaterialWizard();
            setTimeout(function () {
                $('.card.card-wizard').addClass('active');
            }, 600);
        });
    </script>



    <script>
        $(document).ready(function () {
    $("#FoundedYear").datepicker({
        changeYear: true,
        dateFormat: 'yy-mm-dd',
        altFormat: "yy-mm-dd",
        maxDate: '0'
    });

    $("#DateElection").datepicker({
        changeYear: true,
        dateFormat: 'yy-mm-dd',
        altFormat: "yy-mm-dd"
    });



   var FoundedYear = '@(ViewBag.FoundedYear is DateTime ? ((DateTime)ViewBag.FoundedYear).ToString("yyyy-MM-dd") : "")';
var DateElection = '@(ViewBag.DateElection is DateTime ? ((DateTime)ViewBag.DateElection).ToString("yyyy-MM-dd") : "")';

    if (FoundedYear !== "") {
        $('#FoundedYear').datepicker('setDate', FoundedYear);
    }

    if (DateElection !== "") {
        $('#DateElection').datepicker('setDate', DateElection);
    }
        //else {
    //    $('#DateElection').val(""); // مسح القيمة الافتراضية إذا لم يكن هناك تاريخ مخزن
    //}
});

    </script>
    <script>
        $(document).ready(function () {
            //    $("#Div_DateElection").hide();
            //$("#Div_CorporateGenderType").hide();

            //$("#FoundedYear").datepicker({
            //    changeYear: true,
            //dateFormat: 'yy/mm/dd',
            //altFormat: "yy/mm/dd",
            //maxDate: '0'
            //    });

            //$("#DateElection").datepicker({
            //    changeYear: true,
            //dateFormat: 'yy/mm/dd',
            //altFormat: "yy/mm/dd"
            //    });

            $("#StartDate").datepicker({ dateFormat: 'yy-mm-dd' }).bind("change", function () {
                var maxValue = $(this).val();
                maxValue = $.datepicker.parseDate("yy-mm-dd", maxValue);
                maxValue.setDate(maxValue.getDate());
                $("#LastTimeToApply").datepicker("option", "maxDate", maxValue);
                $("#LastTimeToApply").datepicker("option", "minDate", $.datepicker.formatDate('yy-mm-dd', new Date()));
            })

            $("#StartDate").datepicker({ dateFormat: 'yy-mm-dd' }).bind("change", function () {
                var minValue = $(this).val();
                minValue = $.datepicker.parseDate("yy-mm-dd", minValue);
                minValue.setDate(minValue.getDate());
                $("#EndDate").datepicker("option", "minDate", minValue);
            })

        });

    </script>

    <script>
   $(document).ready(function () {
    // تشغيل الكود عند تحميل الصفحة
    checkSectorOnLoad();

    // التحقق من وجود قيمة محفوظة لـ corporateGenderType عند تحميل الصفحة
    var selectedGenderType = $("#_CorporateApplicationForm_corporateGenderType").val();
    if (selectedGenderType !== "" && selectedGenderType !== null) {
        $("#Div_CorporateGenderType").show();
    }

    // تشغيل الكود عند تغيير القطاع يدويًا
    $("#ddlCategory").on('change', function () {
        checkSectorOnChange();
    });

    function checkSectorOnLoad() {
        var selectedCategory = $("#ddlCategory").val();
        var selectedText = $("#ddlCategory option:selected").text().trim();
        var selectedSector = $("#Sectors").val(); // قراءة القيمة المخزنة مسبقًا

        // تحقق إذا كان هناك قطاع مختار مسبقًا
        if (selectedCategory && selectedCategory !== '') {
            $.getJSON('@Url.Action("GetSectors", "Account")', { "Category": selectedCategory }, function (Sectors) {
                var option = '';
                if (Sectors && !jQuery.isEmptyObject(Sectors)) {
                    $.each(Sectors, function (index, Sector) {
                        var isSelected = (Sector.Value == selectedSector) ? ' selected' : ''; // التحقق من القيمة المخزنة
                        option += `<option value="${Sector.Value}"${isSelected}>${Sector.Text}</option>`;
                    });
                    $("#Sectors").html(option).selectpicker('refresh');

                    // إعادة تحديد القيمة المحفوظة مسبقًا
                    if (selectedSector) {
                        $("#Sectors").val(selectedSector).selectpicker('refresh');
                    }
                }

                // التحقق بعد تحميل القطاعات إن كان القطاع غير ربحي
                checkNonProfitSector(selectedText);
            });
        } else {
            // تحقق مباشرة عند تحميل الصفحة إذا لم يكن هناك تغيير
            checkNonProfitSector(selectedText);
        }
    }

    function checkSectorOnChange() {
        var selectedCategory = $("#ddlCategory").val();
        var selectedText = $("#ddlCategory option:selected").text().trim();

        if (selectedCategory && selectedCategory !== '') {
            $.getJSON('@Url.Action("GetSectors", "Account")', { "Category": selectedCategory }, function (Sectors) {
                var option = '';
                if (Sectors && !jQuery.isEmptyObject(Sectors)) {
                    $.each(Sectors, function (index, Sector) {
                        option += `<option value="${Sector.Value}">${Sector.Text}</option>`;
                    });
                    $("#Sectors").html(option).selectpicker('refresh');
                }
            });

            // تحقق عند تغيير القطاع يدويًا
            checkNonProfitSector(selectedText);
        }
    }

    function checkNonProfitSector(categoryText) {
        if (categoryText === "Non Profit Sector" || categoryText === "القطاع غير ربحي") {
            $("#Div_DateElection, #Div_CorporateGenderType").fadeIn();
        } else {
            $("#Div_DateElection, #Div_CorporateGenderType").fadeOut();
        }
    }
});





        @*$("#Region").on('change', function () {
            var selectedRegion = $("#Region").val();
            var options = [];
            var option = '';
            if (selectedRegion != null && selectedRegion != '') {
                $.getJSON('@Url.Action("GetGovernorates")', { Region: selectedRegion }, function (Governorates) {
                    if (Governorates != null && !jQuery.isEmptyObject(Governorates)) {

                        $.each(Governorates, function (index, Governorate) {
                            option = option + '<option value="' + Governorate.Value + '">' + Governorate.Text + "</option>"
                        });
                        $("#Governorate").html(option).selectpicker('refresh');
                    };
                });
            }
        });

        $("#Governorate").on('change', function () {
            var selectedGovernorate = $("#Governorate").val();
            var options = [];
            var option = '';
            if (selectedGovernorate != null && selectedGovernorate != '') {
                $.getJSON('@Url.Action("GetCities")', { Governorate: selectedGovernorate }, function (Cities) {
                    if (Cities != null && !jQuery.isEmptyObject(Cities)) {

                        $.each(Cities, function (index, City) {
                            option = option + '<option value="' + City.Value + '">' + City.Text + "</option>"
                        });
                        $("#City").html(option).selectpicker('refresh');
                    };
                });
            }
        });*@
    </script>
    <script>
        $(document).ready(function () {
    // تحميل المحافظات عند اختيار المنطقة
    $("#Region").on("change", function () {
        var selectedRegion = $("#Region").val();
        var options = [];
        var option = "";

        // تصفية المحافظات وإعادة تعيين قائمة المدن
        $("#Governorate").html("").selectpicker("refresh");
        $("#City").html("").selectpicker("refresh"); // تصغير قائمة الأحياء

        if (selectedRegion != null && selectedRegion !== "") {
            $.getJSON('@Url.Action("GetGovernorates")', { Region: selectedRegion }, function (Governorates) {
                if (Governorates != null && !jQuery.isEmptyObject(Governorates)) {
                    $.each(Governorates, function (index, Governorate) {
                        option += '<option value="' + Governorate.Value + '">' + Governorate.Text + "</option>";
                    });

                    $("#Governorate").html(option).selectpicker("refresh");

                    // تحديد المحافظة المخزنة مسبقًا إن وجدت
                    var storedGovernorate = '@(Model._CorporateApplicationForm.GovernorateID?.ToString() ?? "")';
                    if (storedGovernorate) {
                        $("#Governorate").val(storedGovernorate).selectpicker("refresh").trigger("change");
                    }
                }
            });
        }
    });

    // تحميل المدن عند اختيار المحافظة
    $("#Governorate").on("change", function () {
        var selectedGovernorate = $("#Governorate").val();
        var options = [];
        var option = "";

        // إعادة تصغير قائمة الأحياء
        $("#City").html("").selectpicker("refresh");

        if (selectedGovernorate != null && selectedGovernorate !== "") {
            $.getJSON('@Url.Action("GetCities")', { Governorate: selectedGovernorate }, function (Cities) {
                if (Cities != null && !jQuery.isEmptyObject(Cities)) {
                    $.each(Cities, function (index, City) {
                        option += '<option value="' + City.Value + '">' + City.Text + "</option>";
                    });

                    $("#City").html(option).selectpicker("refresh");

                    // تحديد المدينة المخزنة مسبقًا إن وجدت
                    var storedCity = '@(Model._CorporateApplicationForm.CityID?.ToString() ?? "")';
                    if (storedCity) {
                        $("#City").val(storedCity).selectpicker("refresh");
                    }
                }
            });
        }
    });

    // تحميل القيم المخزنة عند تحميل الصفحة لأول مرة
    var storedRegion = '@(Model._CorporateApplicationForm.RegionID?.ToString() ?? "")';
    if (storedRegion) {
        $("#Region").val(storedRegion).selectpicker("refresh").trigger("change");
    }
});

    </script>
    <script>
       $(document).ready(function () {
    // تحميل المحافظات عند اختيار المنطقة
    $("#Region").on("change", function () {
        var selectedRegion = $("#Region").val();
        var options = [];
        var option = "";

        if (selectedRegion != null && selectedRegion !== "") {
            $.getJSON('@Url.Action("GetGovernorates")', { Region: selectedRegion }, function (Governorates) {
                if (Governorates != null && !jQuery.isEmptyObject(Governorates)) {
                    $.each(Governorates, function (index, Governorate) {
                        option += '<option value="' + Governorate.Value + '">' + Governorate.Text + "</option>";
                    });

                    $("#Governorate").html(option).selectpicker("refresh");

                    // تحديد المحافظة المخزنة في قاعدة البيانات إن وجدت
                    var storedGovernorate = '@(Model._CorporateApplicationForm.GovernorateID.ToString() ?? "")';
                    if (storedGovernorate) {
                        $("#Governorate").val(storedGovernorate).selectpicker("refresh").trigger("change");
                    }
                }
            });
        }
    });

    // تحميل المدن عند اختيار المحافظة
    $("#Governorate").on("change", function () {
        var selectedGovernorate = $("#Governorate").val();
        var options = [];
        var option = "";

        if (selectedGovernorate != null && selectedGovernorate !== "") {
            $.getJSON('@Url.Action("GetCities")', { Governorate: selectedGovernorate }, function (Cities) {
                if (Cities != null && !jQuery.isEmptyObject(Cities)) {
                    $.each(Cities, function (index, City) {
                        option += '<option value="' + City.Value + '">' + City.Text + "</option>";
                    });

                    $("#City").html(option).selectpicker("refresh");

                    // تحديد المدينة المخزنة في قاعدة البيانات إن وجدت
                    var storedCity = '@(Model._CorporateApplicationForm.CityID.ToString() ?? "")';
                    if (storedCity) {
                        $("#City").val(storedCity).selectpicker("refresh");
                    }
                }
            });
        }
    });

    // تحميل البيانات المخزنة عند تحميل الصفحة لأول مرة
    var storedRegion = '@(Model._CorporateApplicationForm.RegionID.ToString() ?? "")';
    if (storedRegion) {
        $("#Region").val(storedRegion).selectpicker("refresh").trigger("change");
    }
});

    </script>
    <script>
        $(document).ready(function () {
            $('mytestForm').one('submit', function () {
                $(this).find("input[type='submit']").prop('disabled', true);
                $(this).find('input[type="submit"]').attr('disabled', 'disabled');
                $(this).find("button[type='submit']").prop('disabled', true);
                $(this).find('button[type="submit"]').attr('disabled', 'disabled');
            });
            $('mytestForm').submit(function () {
                $(this).find("input[type='submit']").prop('disabled', true);
                $(this).find('input[type="submit"]').attr('disabled', 'disabled');
                $(this).find("button[type='submit']").prop('disabled', true);
                $(this).find('button[type="submit"]').attr('disabled', 'disabled');
            });
            $('input').focusout(function () {
                if ($(this).val() != '') {
                    $(':input[type="submit"]').prop('disabled', false);
                    $(':button[type="submit"]').prop('disabled', false);

                    $(':input[type="submit"]').removeAttr('disabled');
                    $(':button[type="submit"]').removeAttr('disabled');
                }
            });
            $('select').change(function () {
                if ($(this).val() != '') {
                    $(':input[type="submit"]').prop('disabled', false);
                    $(':button[type="submit"]').prop('disabled', false);

                    $(':input[type="submit"]').removeAttr('disabled');
                    $(':button[type="submit"]').removeAttr('disabled');
                }
            });
            $('textarea').focusout(function () {
                if ($(this).val() != '') {
                    $(':input[type="submit"]').prop('disabled', false);
                    $(':button[type="submit"]').prop('disabled', false);

                    $(':input[type="submit"]').removeAttr('disabled');
                    $(':button[type="submit"]').removeAttr('disabled');
                }
            });
        });
    </script>

    <script>
        $(document).ready(function () {

            let defaultTab = "#BasicData";
            let activeTab = localStorage.getItem("activeTab") || defaultTab; // تحديد التبويب المخزن أو الافتراضي

            // فتح التبويب المناسب عند تحميل الصفحة
            $('.nav-pills a[href="' + activeTab + '"]').tab("show");

            // عند النقر على أي تبويب، يتم حفظه في التخزين المحلي
            $(".nav-pills a").on("click", function () {
                let newTab = $(this).attr("href");
                localStorage.setItem("activeTab", newTab);
            });

            // زر "التالي" يمنع التحقق وينقل المستخدم إلى التبويب التالي فقط
            $(".btn-next").click(function (event) {
                event.preventDefault();
                let $activeTab = $(".nav-pills .nav-link.active"); // التبويب الحالي
                let $nextTab = $activeTab.parent().next().find(".nav-link"); // التبويب التالي

                if ($nextTab.length > 0) {
                    $nextTab.tab("show");
                    localStorage.setItem("activeTab", $nextTab.attr("href")); // حفظ التبويب الحالي
                }
            });
        });

    </script>

    <script>

    </script>
    <script>
        $(document).ready(function () {



            $("#btn-secondary").click(function (event) {
                event.preventDefault(); // منع الإرسال الافتراضي

                var isFilled = false; // التحقق مما إذا كان هناك بيانات مدخلة

                $("#mytestForm").find("input, select, textarea").each(function () {
                    if ($(this).val().trim() !== "" && !$(this).prop("disabled")) {
                        isFilled = true;
                        console.log("isFilled");
                        return false; // إنهاء التكرار بمجرد العثور على حقل يحتوي على بيانات
                    }
                });

                if (!isFilled) {
                    console.log("!isFilled");
                    alert(" يجب إدخال بيانات في حقل واحد على الأقل قبل حفظ المسودة.");
                    return;
                }

                console.log(" تم إدخال بيانات، سيتم حفظ المسودة.");

                // تعطيل الفاليديشن والسماح بحفظ المسودة حتى لو كانت الحقول فارغة
                $("#mytestForm").attr("novalidate", "novalidate");
                $("#actionType").val("saveAsDraft");
                $("#mytestForm")[0].submit();
            });


        });

        function setActionType(value) {
            $("#actionType").val(value);
        }
    </script>
    <script>
        $(document).ready(function () {



        const defaultImageSrc = "@Url.Content("~/assets/img/default-avatar.png")";
        const $preview = $("#wizardPicturePreview");
        let isImageUploaded = false;

        $("#wizard-picture").on("change", function () {
            const file = this.files[0];

            if (file) {
                const allowedTypes = ["image/jpeg", "image/png", "image/gif"];
                const allowedExtensions = [".jpg", ".jpeg", ".png", ".gif"];
                const fileType = file.type;
                const fileName = file.name.toLowerCase();

                const isValidType = allowedTypes.includes(fileType);
                const isValidExtension = allowedExtensions.some(ext => fileName.endsWith(ext));

                if (!(isValidType && isValidExtension)) {
                    alert("الملف المرفوع يجب أن يكون صورة بصيغة JPG أو PNG أو GIF فقط.");

                    // تعيين الصورة الافتراضية
                    $preview.attr("src", defaultImageSrc);
                    isImageUploaded = false;

                    // إعادة تعيين input بدون فقدان الأحداث
                    const $newInput = $(this).clone().val("");
                    $(this).replaceWith($newInput);
                    $newInput.on("change", arguments.callee); // إعادة ربط الحدث

                    return;
                }

                //  إذا كانت الصورة صحيحة: عرضها وتحديث الحالة
                const reader = new FileReader();
                reader.onload = function (e) {
                    $preview.attr("src", e.target.result);
                };
                reader.readAsDataURL(file);
                isImageUploaded = true;

                // إزالة التمييز الأحمر
                $preview.removeClass("border border-danger");
            }
        });




            function checkExistingFiles() {
                let fileCount = $("#AttachmentDatatables tbody tr").length;
                let fileInput = $("#selectedFile")[0].files.length;

                if (fileCount === 0 && fileInput === 0) {
                    $("#selectedFile").attr("required", "required");
                    return false;
                } else {
                    $("#selectedFile").removeAttr("required");
                    return true;
                }
            }
            function checkRequiredFields() {
                let allValid = true;
                let missingFields = [];

                $("input[required], select[required], textarea[required]").each(function () {
                    let fieldName = $(this).attr("name") || $(this).attr("id");

                    // **شرط خاص بـ "تاريخ الانتخابات" (DateElection)**
                    if (fieldName === "_CorporateApplicationForm.DateElection") {
                        let sectorText = $("#ddlCategory option:selected").text().trim(); // اسم القطاع المحدد
                        if (sectorText !== "Non Profit Sector" && sectorText !== "القطاع غير ربحي") {
                            $(this).removeClass("border border-danger"); // إزالة التمييز
                            return; // تخطي التحقق لهذا الحقل
                        }
                    }

                    if ($(this).val().trim() === "" || $(this).is(":invalid")) {
                        allValid = false;
                        missingFields.push(fieldName); // جمع أسماء الحقول الناقصة
                        $(this).addClass("border border-danger"); // تمييز الحقل الناقص
                    } else {
                        $(this).removeClass("border border-danger"); // إزالة التمييز عند الإدخال الصحيح
                    }
                });

                if (!allValid) {
                 alert("الرجاء تعبئة الحقول اللازمة" ); // عرض أسماء الحقول الناقصة
                   /* alert("الرجاء تعبئة الحقول:\n" + missingFields.join("\n")); // عرض أسماء الحقول الناقصة*/
                }

                return allValid;
            }



            checkExistingFiles();

            $(".remove").on("click", function () {
                setTimeout(checkExistingFiles, 500);
            });

            $("#selectedFile").on("change", function () {
                checkExistingFiles();
            });

 $("#btn_finish").on("click", function (e) {
               event.preventDefault(); // منع الإرسال الافتراضي


                // التحقق من الحقول المطلوبة
                if (!checkRequiredFields()) {

                    return false; // إيقاف التنفيذ إذا كانت هناك أخطاء في الإدخال
                }

                // التحقق من وجود ملفات مرفقة
                 if (!checkExistingFiles()) {
                     console.log("sjkjshkfja");
                    alert("يجب رفع ملف واحد على الأقل قبل الإرسال النهائي.");
                    return false;
                }
            // التحقق من نوع الملفات المرفوعة
            if (!validateFileTypes()) {
                alert("يجب أن تكون الملفات من الأنواع التالية: JPEG, PNG, GIF, PDF.");
                return false;
                }
                 const $preview = $("#wizardPicturePreview");
                const currentSrc = $preview.attr("src");
                if (!isImageUploaded || currentSrc === defaultImageSrc) {
                    alert("يرجى رفع شعار المؤسسة قبل الإرسال النهائي.");
                    $preview.addClass("border border-danger");
                    e.preventDefault();
                    return false;
                }
                 // تعطيل الأزرار
                 $("#btn_finish").prop("disabled", true).text("...جاري الإرسال");
                 $("#btn-secondary").prop("disabled", true).text("...جاري الحفظ");

                 ////  منع الخروج أو التكرار أثناء العملية
                 //window.onbeforeunload = function () {
                 //    return "الرجاء الانتظار حتى انتهاء العملية...";
                 //};
                 //
                                 // داخل زر btn_finish عند نجاح التحقق
                                 $("#savingModal").modal("show");

     // تمرير نوع الإجراء إلى الحقل المخفي ثم الإرسال
                            $("#actionType").val("submitForm");
                            $("#mytestForm").submit();
            });
            // إزالة منع الخروج عند نجاح الإرسال
            //$("#mytestForm").on("submit", function () {
            //    window.onbeforeunload = null;
            //});

$("#wizard-picture").on("change", function () {
    $("#wizardPicturePreview").removeClass("border border-danger");
});
        // التحقق من أنواع الملفات المرفوعة
        function validateFileTypes() {
            let fileInput = $("#selectedFile")[0].files.length;
            if (fileInput > 0) {
                let validTypes = ["image/jpeg", "image/png", "image/gif", "application/pdf"];
                let invalidFiles = false;

                $.each($("#selectedFile")[0].files, function (index, file) {
                    if (!validTypes.includes(file.type)) {
                        invalidFiles = true;
                    }
                });

                return !invalidFiles;
            }
            return true; // إذا لم يتم رفع ملفات جديدة، يعتبر التحقق ناجحًا
        }
      });

    </script>
    <script>





                //let isSubmitting = false;

                //$(document).ready(function () {

                //    $("#btn_finish, #btn-secondary").on("click", function (e) {
                //        if (isSubmitting) {
                //            e.preventDefault();
                //            return false;
                //        }
                //        isSubmitting = true;

                //        // تعطيل الأزرار
                //        $("#btn_finish").prop("disabled", true).text("...جاري الإرسال");
                //        $("#btn-secondary").prop("disabled", true).text("...جاري الحفظ");

                //        // اختياري: منع الخروج أو التكرار أثناء العملية
                //        window.onbeforeunload = function () {
                //            return "الرجاء الانتظار حتى انتهاء العملية...";
                //        };
                //    });

                //    // عند إرسال النموذج، قم بإزالة الحماية من الخروج
                //    $("#mytestForm").on("submit", function () {
                //        window.onbeforeunload = null;
                //    });
                //});


    </script>



    <script>


    </script>
    <script>

    </script>

</body>
        </html>





